import{P as D,h as O,p as R,r as _,i as N,q as y,C as L,D as P,E as v,z as q,g as k,M as z,G,u as j,H,_ as J,j as r,a as n,w as l,I as C,k as d,F as m,l as h,f as S,t as x,b as g,B as K,J as Q,A as b,v as W,o,c as X,K as E,e as p}from"./index-CoUmEw81.js";import{V as U,a as Y}from"./VCard-ht2rPT9c.js";const Z={components:{PicInput:D},emits:["reloadSettings"],setup(u,{emit:a}){const V=O(),e=R(),s=_("noApp"),A=_(""),c=j(),t=q(),F=N(()=>e.allSettings),f=N(()=>H(e.currentAppSettings));function I(){s.value="newApp",e.currentAppSettings=null}y(()=>e.currentAppSettings,()=>{e.currentAppSettings&&(s.value="selectedApp")}),e.currentAppSettings&&(s.value="selectedApp"),y(()=>t.name,()=>{t.name==="newApp"&&(s.value="newApp")},{immediate:!0});function T(){k.post(`/api/setup/create/${A.value}`).then(i=>{var w;c.push({name:"app",params:{appId:(w=i.data)==null?void 0:w.appCreatedId}}),a("reloadSettings")})}function M(){V.awaitConfirmation({text:"Are you sure you want to delete the app ?",type:"warning"}).then(()=>{var i;k.delete(`/api/setup/delete/${(i=f.value)==null?void 0:i.applicationName}`).then(()=>{c.push({name:"index"}),a("reloadSettings")})}).catch(i=>{if(i!==z.PROMISE_USER_CANCELLED)throw new Error(i)})}function B(){G(f.value,e.currentAppSettings.applicationName),a("reloadSettings")}return{appFormState:s,newAppName:A,settings:F,settingsStore:e,currentSettings:f,newAppForm:I,createApp:T,route:t,updateApp:B,deleteApp:M,v$:L({$autoDirty:!0})}},validations(){const u=P.withMessage("Only lowercase letters without spaces are allowed",a=>a===""||/^[a-z]+$/.test(a));return{title:{required:v},applicationName:{required:v,alpha:u},newAppName:{required:v,alpha:u}}}},$={key:0,class:"pic-container"},ee=d("h2",null," Select or create an application ",-1),te={key:1,class:"pic-flex"},ae={class:"pic-container pic-aside"},ne=d("h2",null," App List ",-1),le={class:"pic-container"},oe={class:"pic-flex pic-between"};function ie(u,a,V,e,s,A){const c=W("router-link");return!e.route.params.appId&&e.route.name!=="newApp"?(o(),r("div",$,[n(C,null,{default:l(()=>[ee]),_:1}),n(C,null,{default:l(()=>[(o(!0),r(m,null,h(e.settings,t=>(o(),X(E,{key:t.applicationName},{default:l(()=>[n(U,{height:"100",title:t.applicationName,color:"primary",to:{name:"app",params:{appId:t.id}}},null,8,["title","to"])]),_:2},1024))),128)),n(E,null,{default:l(()=>[n(U,{height:"100",color:"grey",to:{name:"newApp"}},{default:l(()=>[n(Y,null,{default:l(()=>[p(" New App ")]),_:1})]),_:1})]),_:1})]),_:1})])):(o(),r("div",te,[d("aside",ae,[ne,(o(!0),r(m,null,h(e.settings,t=>(o(),r("div",{key:t.id},[n(c,{class:"pic-button--text",to:{name:"app",params:{appId:t.id}}},{default:l(()=>[p(x(t.applicationName),1)]),_:2},1032,["to"])]))),128)),n(S,{color:"primary",onClick:e.newAppForm},{default:l(()=>[p(" New App ")]),_:1},8,["onClick"])]),d("main",le,[e.appFormState==="selectedApp"?(o(),r(m,{key:0},[d("h2",null,x(e.currentSettings.applicationName),1),n(g,{modelValue:e.currentSettings.title,"onUpdate:modelValue":a[0]||(a[0]=t=>e.currentSettings.title=t),validation:e.v$.title,label:"Title"},null,8,["modelValue","validation"]),n(g,{modelValue:e.currentSettings.applicationName,"onUpdate:modelValue":a[1]||(a[1]=t=>e.currentSettings.applicationName=t),validation:e.v$.applicationName,label:"Application name"},null,8,["modelValue","validation"]),n(g,{modelValue:e.currentSettings.messageTimeOut,"onUpdate:modelValue":a[2]||(a[2]=t=>e.currentSettings.messageTimeOut=t),validation:e.v$.messageTimeOut,label:"Message Timeout"},null,8,["modelValue","validation"]),n(K,{modelValue:e.currentSettings.styleSet,"onUpdate:modelValue":a[3]||(a[3]=t=>e.currentSettings.styleSet=t),items:e.settingsStore.allStyleSets,label:"Style Set","item-title":"setName","item-value":"id"},null,8,["modelValue","items"]),n(Q,{modelValue:e.currentSettings.devMode,"onUpdate:modelValue":a[4]||(a[4]=t=>e.currentSettings.devMode=t),type:"checkbox",label:"Dev mode"},null,8,["modelValue"]),d("div",oe,[n(S,{color:"primary",onClick:a[5]||(a[5]=t=>e.updateApp())},{default:l(()=>[p(" Update ")]),_:1}),n(S,{variant:"text",class:"pic-button--text",onClick:e.deleteApp},{default:l(()=>[p(" Delete ")]),_:1},8,["onClick"])])],64)):b("",!0),e.appFormState==="newApp"?(o(),r(m,{key:1},[n(g,{modelValue:e.newAppName,"onUpdate:modelValue":a[6]||(a[6]=t=>e.newAppName=t),validation:e.v$.newAppName,label:"App Name"},null,8,["modelValue","validation"]),n(S,{color:"primary",onClick:e.createApp},{default:l(()=>[p(" Create App ")]),_:1},8,["onClick"])],64)):b("",!0)])]))}const pe=J(Z,[["render",ie]]);export{pe as default};
