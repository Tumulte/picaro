(self.webpackChunkjavascript_development_environment=self.webpackChunkjavascript_development_environment||[]).push([[462],{5416:(t,e,n)=>{"use strict";n.d(e,{ML:()=>ne,hj:()=>p,vc:()=>re,NB:()=>oe,nU:()=>_t,Nl:()=>wt,EG:()=>ue,hT:()=>$,Cf:()=>ae,K9:()=>le,P1:()=>Zt,x2:()=>se,pr:()=>pe,zK:()=>ce,S0:()=>de});var o=n(6922),r=n(1081),s=n(2778),i=n(3263),a=n(4465),c=n(8780),d=n(6296);function l(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function u(t,e){const n={...t};return l(t)&&l(e)&&Object.keys(e).forEach((o=>{l(e[o])?o in t?n[o]=u(t[o],e[o]):Object.assign(n,{[o]:e[o]}):Object.assign(n,{[o]:e[o]})})),n}class p{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new p(t)}configure(t={}){const e=this.extend();return e.options=u(this.options,t),e}extend(t={}){const e=new p(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}function h(t,e,n){const{from:o,to:r}=e,{blockSeparator:s="\n\n",textSerializers:i={}}=n||{};let a="",c=!0;return t.nodesBetween(o,r,((t,e,n,d)=>{var l;const u=null==i?void 0:i[t.type.name];u?(t.isBlock&&!c&&(a+=s,c=!0),a+=u({node:t,pos:e,parent:n,index:d})):t.isText?(a+=null===(l=null==t?void 0:t.text)||void 0===l?void 0:l.slice(Math.max(o,e)-e,r-e),c=!1):t.isBlock&&!c&&(a+=s,c=!0)})),a}function m(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}const f=p.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new o.Sy({key:new o.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:o,selection:r}=e,{from:s,to:i}=r;return h(o,{from:s,to:i},{textSerializers:m(n)})}}})]}});var g=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{t.isDestroyed||e.dom.blur()})),!0)}),b=Object.freeze({__proto__:null,clearContent:(t=!1)=>({commands:e})=>e.setContent("",t)}),y=Object.freeze({__proto__:null,clearNodes:()=>({state:t,tr:e,dispatch:n})=>{const{selection:o}=e,{ranges:s}=o;return s.forEach((o=>{t.doc.nodesBetween(o.$from.pos,o.$to.pos,((t,o)=>{if(t.type.isText)return;const s=e.doc.resolve(e.mapping.map(o)),i=e.doc.resolve(e.mapping.map(o+t.nodeSize)),a=s.blockRange(i);if(!a)return;const c=(0,r.k9)(a);if(t.type.isTextblock&&n){const{defaultType:t}=s.parent.contentMatchAt(s.index());e.setNodeMarkup(a.start,t)}(c||0===c)&&n&&e.lift(a,c)}))})),!0}}),v=Object.freeze({__proto__:null,command:t=>e=>t(e)}),M=Object.freeze({__proto__:null,createParagraphNear:()=>({state:t,dispatch:e})=>(0,s.mD)(t,e)});function k(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var _=Object.freeze({__proto__:null,deleteNode:t=>({tr:e,state:n,dispatch:o})=>{const r=k(t,n.schema),s=e.selection.$anchor;for(let t=s.depth;t>0;t-=1)if(s.node(t).type===r){if(o){const n=s.before(t),o=s.after(t);e.delete(n,o).scrollIntoView()}return!0}return!1}}),w=Object.freeze({__proto__:null,deleteRange:t=>({tr:e,dispatch:n})=>{const{from:o,to:r}=t;return n&&e.delete(o,r),!0}}),x=Object.freeze({__proto__:null,deleteSelection:()=>({state:t,dispatch:e})=>(0,s.NE)(t,e)}),O=Object.freeze({__proto__:null,enter:()=>({commands:t})=>t.keyboardShortcut("Enter")}),S=Object.freeze({__proto__:null,exitCode:()=>({state:t,dispatch:e})=>(0,s.uo)(t,e)});function T(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function H(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function L(t,e,n={strict:!0}){const o=Object.keys(e);return!o.length||o.every((o=>n.strict?e[o]===t[o]:H(e[o])?e[o].test(t[o]):e[o]===t[o]))}function C(t,e,n={}){return t.find((t=>t.type===e&&L(t.attrs,n)))}function A(t,e,n={}){return!!C(t,e,n)}function P(t,e,n={}){if(!t||!e)return;const o=t.parent.childAfter(t.parentOffset);if(!o.node)return;const r=C(o.node.marks,e,n);if(!r)return;let s=t.index(),i=t.start()+o.offset,a=s+1,c=i+o.node.nodeSize;for(C(o.node.marks,e,n);s>0&&r.isInSet(t.parent.child(s-1).marks);)s-=1,i-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&A(t.parent.child(a).marks,e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:i,to:c}}var j=Object.freeze({__proto__:null,extendMarkRange:(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=T(t,r.schema),{doc:a,selection:c}=n,{$from:d,from:l,to:u}=c;if(s){const t=P(d,i,e);if(t&&t.from<=l&&t.to>=u){const e=o.Bs.create(a,t.from,t.to);n.setSelection(e)}}return!0}}),E=Object.freeze({__proto__:null,first:t=>e=>{const n="function"==typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1}});function B(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function z(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!function(t){var e;return"class"===(null===(e=t.constructor)||void 0===e?void 0:e.toString().substring(0,5))}(t)}function $(t){return z(t)&&t instanceof o.Bs}var N=Object.freeze({__proto__:null,focus:(t=null)=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=()=>{(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&n.dom.focus(),requestAnimationFrame((()=>{e.isDestroyed||(n.focus(),e.commands.scrollIntoView())}))};if(n.hasFocus()&&null===t||!1===t)return!0;if(s&&null===t&&!$(e.state.selection))return i(),!0;const{from:a,to:c}=function(t,e=null){if(!e)return null;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{size:e}=t.doc.content;return{from:e,to:e}}return{from:e,to:e}}(e.state,t)||e.state.selection,{doc:d,storedMarks:l}=r,u=o.Y1.atStart(d).from,p=o.Y1.atEnd(d).to,h=B(a,u,p),m=B(c,u,p),f=o.Bs.create(d,h,m),g=e.state.selection.eq(f);return s&&(g||r.setSelection(f),g&&l&&r.setStoredMarks(l),i()),!0}}),I=Object.freeze({__proto__:null,forEach:(t,e)=>n=>t.every(((t,o)=>e(t,{...n,index:o})))}),R=Object.freeze({__proto__:null,insertContent:(t,e)=>({tr:n,commands:o})=>o.insertContentAt({from:n.selection.from,to:n.selection.to},t,e)});function K(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function D(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof t&&null!==t)try{return Array.isArray(t)?i.HY.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),D("",e,n)}if("string"==typeof t){const o=i.aw.fromSchema(e);return n.slice?o.parseSlice(K(t),n.parseOptions).content:o.parse(K(t),n.parseOptions)}return D("",e,n)}var q=Object.freeze({__proto__:null,insertContentAt:(t,e,n)=>({tr:s,dispatch:i,editor:a})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=D(e,a.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;const{from:c,to:d}="number"==typeof t?{from:t,to:t}:t;s.replaceWith(c,d,i),n.updateSelection&&function(t,e,n){const s=t.steps.length-1;if(s<e)return;const i=t.steps[s];if(!(i instanceof r.Pu||i instanceof r.FC))return;const a=t.mapping.maps[s];let c=0;a.forEach(((t,e,n,o)=>{0===c&&(c=o)})),t.setSelection(o.Y1.near(t.doc.resolve(c),1))}(s,s.steps.length-1)}return!0}}),W=Object.freeze({__proto__:null,joinBackward:()=>({state:t,dispatch:e})=>(0,s.al)(t,e)}),F=Object.freeze({__proto__:null,joinForward:()=>({state:t,dispatch:e})=>(0,s.Y_)(t,e)});const V="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var U=Object.freeze({__proto__:null,keyboardShortcut:t=>({editor:e,view:n,tr:o,dispatch:r})=>{const s=function(t){const e=t.split(/-(?!$)/);let n,o,r,s,i=e[e.length-1];"Space"===i&&(i=" ");for(let t=0;t<e.length-1;t+=1){const i=e[t];if(/^(cmd|meta|m)$/i.test(i))s=!0;else if(/^a(lt)?$/i.test(i))n=!0;else if(/^(c|ctrl|control)$/i.test(i))o=!0;else if(/^s(hift)?$/i.test(i))r=!0;else{if(!/^mod$/i.test(i))throw new Error(`Unrecognized modifier name: ${i}`);V?s=!0:o=!0}}return n&&(i=`Alt-${i}`),o&&(i=`Ctrl-${i}`),s&&(i=`Meta-${i}`),r&&(i=`Shift-${i}`),i}(t).split(/-(?!$)/),i=s.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===i?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null==c||c.steps.forEach((t=>{const e=t.map(o.mapping);e&&r&&o.maybeStep(e)})),!0}});function J(t,e,n={}){const{from:o,to:r,empty:s}=t.selection,i=e?k(e,t.schema):null,a=[];t.doc.nodesBetween(o,r,((t,e)=>{if(t.isText)return;const n=Math.max(o,e),s=Math.min(r,e+t.nodeSize);a.push({node:t,from:n,to:s})}));const c=r-o,d=a.filter((t=>!i||i.name===t.node.type.name)).filter((t=>L(t.node.attrs,n,{strict:!1})));return s?!!d.length:d.reduce(((t,e)=>t+e.to-e.from),0)>=c}var Y=Object.freeze({__proto__:null,lift:(t,e={})=>({state:n,dispatch:o})=>!!J(n,k(t,n.schema),e)&&(0,s.xb)(n,o)}),Z=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:t,dispatch:e})=>(0,s.X0)(t,e)}),G=Object.freeze({__proto__:null,liftListItem:t=>({state:e,dispatch:n})=>{const o=k(t,e.schema);return(0,a.IB)(o)(e,n)}}),X=Object.freeze({__proto__:null,newlineInCode:()=>({state:t,dispatch:e})=>(0,s.QK)(t,e)});function Q(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tt(t,e){const n="string"==typeof e?[e]:e;return Object.keys(t).reduce(((e,o)=>(n.includes(o)||(e[o]=t[o]),e)),{})}var et=Object.freeze({__proto__:null,resetAttributes:(t,e)=>({tr:n,state:o,dispatch:r})=>{let s=null,i=null;const a=Q("string"==typeof t?t:t.name,o.schema);return!!a&&("node"===a&&(s=k(t,o.schema)),"mark"===a&&(i=T(t,o.schema)),r&&n.selection.ranges.forEach((t=>{o.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,o)=>{s&&s===t.type&&n.setNodeMarkup(o,void 0,tt(t.attrs,e)),i&&t.marks.length&&t.marks.forEach((r=>{i===r.type&&n.addMark(o,o+t.nodeSize,i.create(tt(r.attrs,e)))}))}))})),!0)}}),nt=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0)}),ot=Object.freeze({__proto__:null,selectAll:()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size})}),rt=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:t,dispatch:e})=>(0,s._M)(t,e)}),st=Object.freeze({__proto__:null,selectNodeForward:()=>({state:t,dispatch:e})=>(0,s.o)(t,e)}),it=Object.freeze({__proto__:null,selectParentNode:()=>({state:t,dispatch:e})=>(0,s.N0)(t,e)});function at(t,e,n={}){return D(t,e,{slice:!1,parseOptions:n})}var ct=Object.freeze({__proto__:null,setContent:(t,e=!1,n={})=>({tr:r,editor:s,dispatch:i})=>{const{doc:a}=r,c=at(t,s.schema,n),d=o.Bs.create(a,0,a.content.size);return i&&r.setSelection(d).replaceSelectionWith(c,!1).setMeta("preventUpdate",!e),!0}});function dt(t,e){const n=T(e,t.schema),{from:o,to:r,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(o,r,(t=>{i.push(...t.marks)}));const a=i.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}var lt=Object.freeze({__proto__:null,setMark:(t,e={})=>({tr:n,state:o,dispatch:r})=>{const{selection:s}=n,{empty:i,ranges:a}=s,c=T(t,o.schema);if(r)if(i){const t=dt(o,c);n.addStoredMark(c.create({...t,...e}))}else a.forEach((t=>{const r=t.$from.pos,s=t.$to.pos;o.doc.nodesBetween(r,s,((t,o)=>{const i=Math.max(o,r),a=Math.min(o+t.nodeSize,s);t.marks.find((t=>t.type===c))?t.marks.forEach((t=>{c===t.type&&n.addMark(i,a,c.create({...t.attrs,...e}))})):n.addMark(i,a,c.create(e))}))}));return!0}}),ut=Object.freeze({__proto__:null,setMeta:(t,e)=>({tr:n})=>(n.setMeta(t,e),!0)}),pt=Object.freeze({__proto__:null,setNode:(t,e={})=>({state:n,dispatch:o})=>{const r=k(t,n.schema);return(0,s.uJ)(r,e)(n,o)}}),ht=Object.freeze({__proto__:null,setNodeSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,r=o.Y1.atStart(n).from,s=o.Y1.atEnd(n).to,i=B(t,r,s),a=o.qv.create(n,i);e.setSelection(a)}return!0}}),mt=Object.freeze({__proto__:null,setTextSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:r,to:s}="number"==typeof t?{from:t,to:t}:t,i=o.Y1.atStart(n).from,a=o.Y1.atEnd(n).to,c=B(r,i,a),d=B(s,i,a),l=o.Bs.create(n,c,d);e.setSelection(l)}return!0}}),ft=Object.freeze({__proto__:null,sinkListItem:t=>({state:e,dispatch:n})=>{const o=k(t,e.schema);return(0,a.bw)(o)(e,n)}});function gt(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const o=t.find((t=>t.type===e&&t.name===n));return!!o&&o.attribute.keepOnSplit})))}function bt(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const o=n.filter((t=>null==e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(o)}}var yt=Object.freeze({__proto__:null,splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:s,editor:i})=>{const{selection:a,doc:c}=e,{$from:d,$to:l}=a,u=gt(i.extensionManager.attributes,d.node().type.name,d.node().attrs);if(a instanceof o.qv&&a.node.isBlock)return!(!d.parentOffset||!(0,r.Ax)(c,d.pos)||(s&&(t&&bt(n,i.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),0));if(!d.parent.isBlock)return!1;if(s){const s=l.parentOffset===l.parent.content.size;a instanceof o.Bs&&e.deleteSelection();const c=0===d.depth?void 0:function(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(d.node(-1).contentMatchAt(d.indexAfter(-1)));let p=s&&c?[{type:c,attrs:u}]:void 0,h=(0,r.Ax)(e.doc,e.mapping.map(d.pos),1,p);if(p||h||!(0,r.Ax)(e.doc,e.mapping.map(d.pos),1,c?[{type:c}]:void 0)||(h=!0,p=c?[{type:c,attrs:u}]:void 0),h&&(e.split(e.mapping.map(d.pos),1,p),c&&!s&&!d.parentOffset&&d.parent.type!==c)){const t=e.mapping.map(d.before()),n=e.doc.resolve(t);d.node(-1).canReplaceWith(n.index(),n.index()+1,c)&&e.setNodeMarkup(e.mapping.map(d.before()),c)}t&&bt(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0}}),vt=Object.freeze({__proto__:null,splitListItem:t=>({tr:e,state:n,dispatch:s,editor:a})=>{var c;const d=k(t,n.schema),{$from:l,$to:u}=n.selection,p=n.selection.node;if(p&&p.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==d)return!1;const m=a.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==d||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let t=i.HY.empty;const n=l.index(-1)?1:l.index(-2)?2:3;for(let e=l.depth-n;e>=l.depth-3;e-=1)t=i.HY.from(l.node(e).copy(t));const r=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s=gt(m,l.node().type.name,l.node().attrs),a=(null===(c=d.contentMatch.defaultType)||void 0===c?void 0:c.createAndFill(s))||void 0;t=t.append(i.HY.from(d.createAndFill(null,a)||void 0));const u=l.before(l.depth-(n-1));e.replace(u,l.after(-r),new i.p2(t,4-n,0));let p=-1;e.doc.nodesBetween(u,e.doc.content.size,((t,e)=>{if(p>-1)return!1;t.isTextblock&&0===t.content.size&&(p=e+1)})),p>-1&&e.setSelection(o.Bs.near(e.doc.resolve(p))),e.scrollIntoView()}return!0}const f=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,g=gt(m,h.type.name,h.attrs),b=gt(m,l.node().type.name,l.node().attrs);e.delete(l.pos,u.pos);const y=f?[{type:d,attrs:g},{type:f,attrs:b}]:[{type:d,attrs:g}];return!!(0,r.Ax)(e.doc,l.pos,2)&&(s&&e.split(l.pos,2,y).scrollIntoView(),!0)}});function Mt(t){return{baseExtensions:t.filter((t=>"extension"===t.type)),nodeExtensions:t.filter((t=>"node"===t.type)),markExtensions:t.filter((t=>"mark"===t.type))}}function kt(t){return"function"==typeof t}function _t(t,e,...n){return kt(t)?e?t.bind(e)(...n):t(...n):t}function wt(t,e,n={}){return void 0===t.config[e]&&t.parent?wt(t.parent,e,n):"function"==typeof t.config[e]?t.config[e].bind({...n,parent:t.parent?wt(t.parent,e,n):null}):t.config[e]}function xt(t,e){const{nodeExtensions:n}=Mt(e),o=n.find((e=>e.name===t));if(!o)return!1;const r=_t(wt(o,"group",{name:o.name,options:o.options}));return"string"==typeof r&&r.split(" ").includes("list")}var Ot=Object.freeze({__proto__:null,toggleList:(t,e)=>({editor:n,tr:o,state:r,dispatch:s,chain:i,commands:a,can:c})=>{const{extensions:d}=n.extensionManager,l=k(t,r.schema),u=k(e,r.schema),{selection:p}=r,{$from:h,$to:m}=p,f=h.blockRange(m);if(!f)return!1;const g=(b=t=>xt(t.type.name,d),t=>function(t,e){for(let n=t.depth;n>0;n-=1){const o=t.node(n);if(e(o))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:o}}}(t.$from,b))(p);var b;if(f.depth>=1&&g&&f.depth-g.depth<=1){if(g.node.type===l)return a.liftListItem(u);if(xt(g.node.type.name,d)&&l.validContent(g.node.content)&&s)return o.setNodeMarkup(g.pos,l),!0}return c().wrapInList(l)?a.wrapInList(l):i().clearNodes().wrapInList(l).run()}});function St(t,e,n={}){const{empty:o,ranges:r}=t.selection,s=e?T(e,t.schema):null;if(o)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!s||s.name===t.type.name)).find((t=>L(t.attrs,n,{strict:!1})));let i=0;const a=[];if(r.forEach((({$from:e,$to:n})=>{const o=e.pos,r=n.pos;t.doc.nodesBetween(o,r,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(o,e),s=Math.min(r,e+t.nodeSize);i+=s-n,a.push(...t.marks.map((t=>({mark:t,from:n,to:s}))))}))})),0===i)return!1;const c=a.filter((t=>!s||s.name===t.mark.type.name)).filter((t=>L(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),d=a.filter((t=>!s||t.mark.type!==s&&t.mark.type.excludes(s))).reduce(((t,e)=>t+e.to-e.from),0);return(c>0?c+d:c)>=i}var Tt=Object.freeze({__proto__:null,toggleMark:(t,e={},n={})=>({state:o,commands:r})=>{const{extendEmptyMarkRange:s=!1}=n,i=T(t,o.schema);return St(o,i,e)?r.unsetMark(i,{extendEmptyMarkRange:s}):r.setMark(i,e)}}),Ht=Object.freeze({__proto__:null,toggleNode:(t,e,n={})=>({state:o,commands:r})=>{const s=k(t,o.schema),i=k(e,o.schema);return J(o,s,n)?r.setNode(i):r.setNode(s,n)}}),Lt=Object.freeze({__proto__:null,toggleWrap:(t,e={})=>({state:n,dispatch:o})=>{const r=k(t,n.schema);return J(n,r,e)?(0,s.xb)(n,o):(0,s.ym)(r,e)(n,o)}}),Ct=Object.freeze({__proto__:null,undoInputRule:()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let o=0;o<n.length;o+=1){const r=n[o];let s;if(r.spec.isInputRules&&(s=r.getState(t))){if(e){const e=t.tr,n=s.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(s.text){const n=e.doc.resolve(s.from).marks();e.replaceWith(s.from,s.to,t.schema.text(s.text,n))}else e.delete(s.from,s.to)}return!0}}return!1}}),At=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:t,state:e,dispatch:n})=>{const{selection:o}=t,{empty:r,ranges:s}=o;return r||n&&Object.entries(e.schema.marks).forEach((([,e])=>{s.forEach((n=>{t.removeMark(n.$from.pos,n.$to.pos,e)}))})),!0}}),Pt=Object.freeze({__proto__:null,unsetMark:(t,e={})=>({tr:n,state:o,dispatch:r})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,c=T(t,o.schema),{$from:d,empty:l,ranges:u}=a;if(!r)return!0;if(l&&i){let{from:t,to:e}=a;const o=null===(s=d.marks().find((t=>t.type===c)))||void 0===s?void 0:s.attrs,r=P(d,c,o);r&&(t=r.from,e=r.to),n.removeMark(t,e,c)}else u.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,c)}));return n.removeStoredMark(c),!0}}),jt=Object.freeze({__proto__:null,updateAttributes:(t,e={})=>({tr:n,state:o,dispatch:r})=>{let s=null,i=null;const a=Q("string"==typeof t?t:t.name,o.schema);return!!a&&("node"===a&&(s=k(t,o.schema)),"mark"===a&&(i=T(t,o.schema)),r&&n.selection.ranges.forEach((t=>{const r=t.$from.pos,a=t.$to.pos;o.doc.nodesBetween(r,a,((t,o)=>{s&&s===t.type&&n.setNodeMarkup(o,void 0,{...t.attrs,...e}),i&&t.marks.length&&t.marks.forEach((s=>{if(i===s.type){const c=Math.max(o,r),d=Math.min(o+t.nodeSize,a);n.addMark(c,d,i.create({...s.attrs,...e}))}}))}))})),!0)}}),Et=Object.freeze({__proto__:null,wrapIn:(t,e={})=>({state:n,dispatch:o})=>{const r=k(t,n.schema);return!J(n,r,e)&&(0,s.ym)(r,e)(n,o)}}),Bt=Object.freeze({__proto__:null,wrapInList:(t,e={})=>({state:n,dispatch:o})=>{const r=k(t,n.schema);return(0,a.KI)(r,e)(n,o)}});const zt=p.create({name:"commands",addCommands:()=>({...g,...b,...y,...v,...M,..._,...w,...x,...O,...S,...j,...E,...N,...I,...R,...q,...W,...F,...U,...Y,...Z,...G,...X,...et,...nt,...ot,...rt,...st,...it,...ct,...lt,...ut,...pt,...ht,...mt,...ft,...yt,...vt,...Ot,...Tt,...Ht,...Lt,...Ct,...At,...Pt,...jt,...Et,...Bt})}),$t=p.create({name:"editable",addProseMirrorPlugins(){return[new o.Sy({key:new o.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Nt=p.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new o.Sy({key:new o.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const o=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(o),!1},blur:(e,n)=>{t.isFocused=!1;const o=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(o),!1}}}})]}}),It=p.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.joinForward(),()=>t.selectNodeForward()]));return{Enter:()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()}}}),Rt=p.create({name:"tabindex",addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("tabindex"),props:{attributes:{tabindex:"0"}}})]});var Kt=Object.freeze({__proto__:null,ClipboardTextSerializer:f,Commands:zt,Editable:$t,FocusEvents:Nt,Keymap:It,Tabindex:Rt});function Dt(t){const{state:e,transaction:n}=t;let{selection:o}=n,{doc:r}=n,{storedMarks:s}=n;return{...e,schema:e.schema,plugins:e.plugins,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return o},get doc(){return r},get tr(){return o=n.selection,r=n.doc,s=n.storedMarks,n}}}class qt{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:o}=e,{tr:r}=n,s=this.buildProps(r);return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,(...t)=>{const n=e(...t)(s);return r.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(r),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:o,state:r}=this,{view:s}=o,i=[],a=!!t,c=t||r.tr,d={...Object.fromEntries(Object.entries(n).map((([t,n])=>[t,(...t)=>{const o=this.buildProps(c,e),r=n(...t)(o);return i.push(r),d}]))),run:()=>(a||!e||c.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(c),i.every((t=>!0===t)))};return d}createCan(t){const{rawCommands:e,state:n}=this,o=void 0,r=t||n.tr,s=this.buildProps(r,o);return{...Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...s,dispatch:o})]))),chain:()=>this.createChain(r,o)}}buildProps(t,e=!0){const{rawCommands:n,editor:o,state:r}=this,{view:s}=o;r.storedMarks&&t.setStoredMarks(r.storedMarks);const i={tr:t,editor:o,view:s,state:Dt({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(i)])))}};return i}}class Wt{constructor(t){this.find=t.find,this.handler=t.handler}}function Ft(t){var e;const{editor:n,from:o,to:r,text:s,rules:i,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(o);if(d.parent.type.spec.code||(null===(e=d.nodeBefore||d.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let l=!1;const u=d.parent.textBetween(Math.max(0,d.parentOffset-500),d.parentOffset,void 0,"￼")+s;return i.forEach((t=>{if(l)return;const e=((t,e)=>{if(H(e))return e.exec(t);const n=e(t);if(!n)return null;const o=[];return o.push(n.text),o.index=n.index,o.input=t,o.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(n.replaceWith)),o})(u,t.find);if(!e)return;const i=c.state.tr,d=Dt({state:c.state,transaction:i}),p={from:o-(e[0].length-s.length),to:r},{commands:h,chain:m,can:f}=new qt({editor:n,state:d});t.handler({state:d,range:p,match:e,commands:h,chain:m,can:f}),i.steps.length&&(i.setMeta(a,{transform:i,from:o,to:r,text:s}),c.dispatch(i),l=!0)})),l}function Vt(t){const{editor:e,rules:n}=t,r=new o.Sy({state:{init:()=>null,apply(t,e){return t.getMeta(this)||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:(t,o,s,i)=>Ft({editor:e,from:o,to:s,text:i,rules:n,plugin:r}),handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:o}=t.state.selection;o&&Ft({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1)},handleKeyDown(t,o){if("Enter"!==o.key)return!1;const{$cursor:s}=t.state.selection;return!!s&&Ft({editor:e,from:s.pos,to:s.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}class Ut{constructor(t){this.find=t.find,this.handler=t.handler}}function Jt(t){const{editor:e,rules:n}=t;let r=!1;const s=new o.Sy({props:{handlePaste:(t,e)=>{var n;const o=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return r=!!(null==o?void 0:o.includes("data-pm-slice")),!1}},appendTransaction:(t,o,i)=>{const a=t[0];if(!a.getMeta("paste")||r)return;const{doc:c,before:d}=a,l=d.content.findDiffStart(c.content),u=d.content.findDiffEnd(c.content);if(!l||!u||l===u.b)return;const p=i.tr,h=Dt({state:i,transaction:p});return function(t){const{editor:e,state:n,from:o,to:r,rules:s}=t,{commands:i,chain:a,can:c}=new qt({editor:e,state:n});n.doc.nodesBetween(o,r,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const d=Math.max(o,e),l=Math.min(r,e+t.content.size),u=t.textBetween(d-e,l-e,void 0,"￼");s.forEach((t=>{((t,e)=>{if(H(e))return[...t.matchAll(e)];const n=e(t);return n?n.map((e=>{const n=[];return n.push(e.text),n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]})(u,t.find).forEach((e=>{if(void 0===e.index)return;const o=d+e.index+1,r=o+e[0].length,s={from:n.tr.mapping.map(o),to:n.tr.mapping.map(r)};t.handler({state:n,range:s,match:e,commands:i,chain:a,can:c})}))}))}))}({editor:e,state:h,from:Math.max(l-1,0),to:u.b,rules:n,plugin:s}),p.steps.length?p:void 0},isPasteRules:!0});return s}function Yt(t){const e=[],{nodeExtensions:n,markExtensions:o}=Mt(t),r=[...n,...o],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return t.forEach((t=>{const n=wt(t,"addGlobalAttributes",{name:t.name,options:t.options});n&&n().forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,o])=>{e.push({type:n,name:t,attribute:{...s,...o}})}))}))}))})),r.forEach((t=>{const n={name:t.name,options:t.options},o=wt(t,"addAttributes",n);if(!o)return;const r=o();Object.entries(r).forEach((([n,o])=>{e.push({type:t.name,name:n,attribute:{...s,...o}})}))})),e}function Zt(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{n[t]?n[t]="class"===t?[n[t],e].join(" "):"style"===t?[n[t],e].join("; "):e:n[t]=e})),n}),{})}function Gt(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>Zt(t,e)),{})}function Xt(t,e){return t.style?t:{...t,getAttrs:n=>{const o=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===o)return!1;const r=e.filter((t=>t.attribute.rendered)).reduce(((t,e)=>{const o=e.attribute.parseHTML?e.attribute.parseHTML(n):function(t){return"string"!=typeof t?t:t.match(/^\d*(\.\d+)?$/)?Number(t):"true"===t||"false"!==t&&t}(n.getAttribute(e.name));return z(o)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${e.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),null==o?t:{...t,[e.name]:o}}),{});return{...o,...r}}}}function Qt(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!function(t={}){return 0===Object.keys(t).length&&t.constructor===Object}(e))&&null!=e)))}function te(t,e){return e.nodes[t]||e.marks[t]||null}class ee{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=ee.resolve(t),this.schema=function(t){var e;const n=Yt(t),{nodeExtensions:o,markExtensions:r}=Mt(t),s=null===(e=o.find((t=>wt(t,"topNode"))))||void 0===e?void 0:e.name,a=Object.fromEntries(o.map((e=>{const o=n.filter((t=>t.type===e.name)),r={name:e.name,options:e.options},s=Qt({...t.reduce(((t,n)=>{const o=wt(n,"extendNodeSchema",r);return{...t,...o?o(e):{}}}),{}),content:_t(wt(e,"content",r)),marks:_t(wt(e,"marks",r)),group:_t(wt(e,"group",r)),inline:_t(wt(e,"inline",r)),atom:_t(wt(e,"atom",r)),selectable:_t(wt(e,"selectable",r)),draggable:_t(wt(e,"draggable",r)),code:_t(wt(e,"code",r)),defining:_t(wt(e,"defining",r)),isolating:_t(wt(e,"isolating",r)),attrs:Object.fromEntries(o.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),i=_t(wt(e,"parseHTML",r));i&&(s.parseDOM=i.map((t=>Xt(t,o))));const a=wt(e,"renderHTML",r);a&&(s.toDOM=t=>a({node:t,HTMLAttributes:Gt(t,o)}));const c=wt(e,"renderText",r);return c&&(s.toText=c),[e.name,s]}))),c=Object.fromEntries(r.map((e=>{const o=n.filter((t=>t.type===e.name)),r={name:e.name,options:e.options},s=Qt({...t.reduce(((t,n)=>{const o=wt(n,"extendMarkSchema",r);return{...t,...o?o(e):{}}}),{}),inclusive:_t(wt(e,"inclusive",r)),excludes:_t(wt(e,"excludes",r)),group:_t(wt(e,"group",r)),spanning:_t(wt(e,"spanning",r)),code:_t(wt(e,"code",r)),attrs:Object.fromEntries(o.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),i=_t(wt(e,"parseHTML",r));i&&(s.parseDOM=i.map((t=>Xt(t,o))));const a=wt(e,"renderHTML",r);return a&&(s.toDOM=t=>a({mark:t,HTMLAttributes:Gt(t,o)})),[e.name,s]})));return new i.V_({topNode:s,nodes:a,marks:c})}(this.extensions),this.extensions.forEach((t=>{var e;const n={name:t.name,options:t.options,editor:this.editor,type:te(t.name,this.schema)};"mark"===t.type&&(null===(e=_t(wt(t,"keepOnSplit",n)))||void 0===e||e)&&this.splittableMarks.push(t.name);const o=wt(t,"onBeforeCreate",n);o&&this.editor.on("beforeCreate",o);const r=wt(t,"onCreate",n);r&&this.editor.on("create",r);const s=wt(t,"onUpdate",n);s&&this.editor.on("update",s);const i=wt(t,"onSelectionUpdate",n);i&&this.editor.on("selectionUpdate",i);const a=wt(t,"onTransaction",n);a&&this.editor.on("transaction",a);const c=wt(t,"onFocus",n);c&&this.editor.on("focus",c);const d=wt(t,"onBlur",n);d&&this.editor.on("blur",d);const l=wt(t,"onDestroy",n);l&&this.editor.on("destroy",l)}))}static resolve(t){return ee.sort(ee.flatten(t))}static flatten(t){return t.map((t=>{const e=wt(t,"addExtensions",{name:t.name,options:t.options});return e?[t,...this.flatten(e())]:t})).flat(10)}static sort(t){return t.sort(((t,e)=>{const n=wt(t,"priority")||100,o=wt(e,"priority")||100;return n>o?-1:n<o?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n=wt(e,"addCommands",{name:e.name,options:e.options,editor:this.editor,type:te(e.name,this.schema)});return n?{...t,...n()}:t}),{})}get plugins(){const{editor:t}=this,e=ee.sort([...this.extensions].reverse()),n=[],o=[],r=e.map((e=>{const r={name:e.name,options:e.options,editor:t,type:te(e.name,this.schema)},s=[],i=wt(e,"addKeyboardShortcuts",r);if(i){const e=Object.fromEntries(Object.entries(i()).map((([e,n])=>[e,()=>n({editor:t})]))),n=(0,d.h)(e);s.push(n)}const a=wt(e,"addInputRules",r);t.options.enableInputRules&&a&&n.push(...a());const c=wt(e,"addPasteRules",r);t.options.enablePasteRules&&c&&o.push(...c());const l=wt(e,"addProseMirrorPlugins",r);if(l){const t=l();s.push(...t)}return s})).flat();return[Vt({editor:t,rules:n}),Jt({editor:t,rules:o}),...r]}get attributes(){return Yt(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Mt(this.extensions);return Object.fromEntries(e.filter((t=>!!wt(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),o={name:e.name,options:e.options,editor:t,type:k(e.name,this.schema)},r=wt(e,"addNodeView",o);return r?[e.name,(o,s,i,a)=>{const c=Gt(o,n);return r()({editor:t,node:o,getPos:i,decorations:a,HTMLAttributes:c,extension:e})}]:[]})))}}class ne extends class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}{constructor(t={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(t){const e=document.querySelector("style[data-tiptap-style]");if(null!==e)return e;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',document.getElementsByTagName("head")[0].appendChild(n),n}())}setOptions(t={}){this.options={...this.options,...t},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t){this.setOptions({editable:t})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=kt(e)?e(t,this.state.plugins):[...this.state.plugins,t],o=this.state.reconfigure({plugins:n});this.view.updateState(o)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"==typeof t?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(e)))});this.view.updateState(n)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(Kt):[],...this.options.extensions].filter((t=>["extension","node","mark"].includes(null==t?void 0:t.type)));this.extensionManager=new ee(t,this)}createCommandManager(){this.commandManager=new qt({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new c.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:o.yy.create({doc:at(this.options.content,this.schema,this.options.parseOptions)})});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)})):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),r=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),r&&this.emit("blur",{editor:this,event:r.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return function(t,e){const n=Q("string"==typeof e?e:e.name,t.schema);return"node"===n?function(t,e){const n=k(e,t.schema),{from:o,to:r}=t.selection,s=[];t.doc.nodesBetween(o,r,(t=>{s.push(t)}));const i=s.reverse().find((t=>t.type.name===n.name));return i?{...i.attrs}:{}}(t,e):"mark"===n?dt(t,e):{}}(this.state,t)}isActive(t,e){const n="string"==typeof t?t:null,o="string"==typeof t?e:t;return function(t,e,n={}){if(!e)return J(t,null,n)||St(t,null,n);const o=Q(e,t.schema);return"node"===o?J(t,e,n):"mark"===o&&St(t,e,n)}(this.state,n,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return function(t,e){const n=i.PW.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return function(t,e){return h(t,{from:0,to:t.content.size},e)}(this.state.doc,{blockSeparator:e,textSerializers:{...n,...m(this.schema)}})}get isEmpty(){return function(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),o=t.toJSON();return JSON.stringify(n)===JSON.stringify(o)}(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){var t;this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),(null==(t=this.css)?void 0:t.parentNode)&&t.parentNode.removeChild(t)}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}class oe{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new oe(t)}configure(t={}){const e=this.extend();return e.options=u(this.options,t),e}extend(t={}){const e=new oe(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}class re{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new re(t)}configure(t={}){const e=this.extend();return e.options=u(this.options,t),e}extend(t={}){const e=new re(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}function se(t){return new Wt({find:t.find,handler:({state:e,range:n,match:o})=>{const r=_t(t.getAttributes,void 0,o)||{},{tr:s}=e,i=n.from;let a=n.to;if(o[1]){let e=i+o[0].lastIndexOf(o[1]);e>a?e=a:a=e+o[1].length;const n=o[0][o[0].length-1];s.insertText(n,i+o[0].length-1),s.replaceWith(e,a,t.type.create(r))}else o[0]&&s.replaceWith(i,a,t.type.create(r))}})}function ie(t,e,n){const o=[];return n.doc.nodesBetween(t,e,((t,e)=>{o.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),o}function ae(t){return new Wt({find:t.find,handler:({state:e,range:n,match:o})=>{const r=_t(t.getAttributes,void 0,o);if(!1===r||null===r)return;const{tr:s}=e,i=o[o.length-1],a=o[0];let c=n.to;if(i){const o=a.search(/\S/),d=n.from+a.indexOf(i),l=d+i.length;if(ie(n.from,n.to,e).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>d)).length)return null;l<n.to&&s.delete(l,n.to),d>n.from&&s.delete(n.from+o,d),c=n.from+o+i.length,s.addMark(n.from+o,c,t.type.create(r||{})),s.removeStoredMark(t.type)}}})}function ce(t){return new Wt({find:t.find,handler:({state:e,range:n,match:o})=>{const r=e.doc.resolve(n.from),s=_t(t.getAttributes,void 0,o)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function de(t){return new Wt({find:t.find,handler:({state:e,range:n,match:o})=>{const s=_t(t.getAttributes,void 0,o)||{},i=e.tr.delete(n.from,n.to),a=i.doc.resolve(n.from).blockRange(),c=a&&(0,r.nd)(a,t.type,s);if(!c)return null;i.wrap(a,c);const d=i.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&(0,r.Mn)(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(o,d))&&i.join(n.from-1)}})}function le(t){return new Ut({find:t.find,handler:({state:e,range:n,match:o})=>{const r=_t(t.getAttributes,void 0,o);if(!1===r||null===r)return;const{tr:s}=e,i=o[o.length-1],a=o[0];let c=n.to;if(i){const o=a.search(/\S/),d=n.from+a.indexOf(i),l=d+i.length;if(ie(n.from,n.to,e).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>d)).length)return null;l<n.to&&s.delete(l,n.to),d>n.from&&s.delete(n.from+o,d),c=n.from+o+i.length,s.addMark(n.from+o,c,t.type.create(r||{})),s.removeStoredMark(t.type)}}})}function ue(t){return z(t)&&t instanceof o.qv}function pe(t,e,n){const o=t.coordsAtPos(e),r=t.coordsAtPos(n,-1),s=Math.min(o.top,r.top),i=Math.max(o.bottom,r.bottom),a=Math.min(o.left,r.left),c=Math.max(o.right,r.right),d={top:s,bottom:i,left:a,right:c,width:c-a,height:i-s,x:a,y:s};return{...d,toJSON:()=>d}}},7082:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>s});var o=n(5416);const r=/^\s*([-+*])\s$/,s=o.NB.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleBulletList:()=>({commands:t})=>t.toggleList("bulletList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[(0,o.S0)({find:r,type:this.type})]}})},2943:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>s});var o=n(5416);const r=/(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))/,s=o.NB.create({name:"image",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML:()=>[{tag:"img[src]"}],renderHTML({HTMLAttributes:t}){return["img",(0,o.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[(0,o.x2)({find:r,type:this.type,getAttributes:t=>{const[,,e,n,o]=t;return{src:n,alt:e,title:o}}})]}})},8802:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(5416),r=n(6922),s=n(5235);const i=o.vc.create({name:"link",priority:1e3,inclusive:!1,defaultOptions:{openOnClick:!0,linkOnPaste:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML:()=>[{tag:"a[href]"}],renderHTML({HTMLAttributes:t}){return["a",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setLink:t=>({commands:e})=>e.setMark("link",t),toggleLink:t=>({commands:e})=>e.toggleMark("link",t,{extendEmptyMarkRange:!0}),unsetLink:()=>({commands:t})=>t.unsetMark("link",{extendEmptyMarkRange:!0})}),addPasteRules(){return[(0,o.K9)({find:t=>(0,s.find)(t).filter((t=>t.isLink)).map((t=>({text:t.value,index:t.start,data:t}))),type:this.type,getAttributes:t=>{var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.openOnClick&&t.push(new r.Sy({key:new r.H$("handleClickLink"),props:{handleClick:(t,e,n)=>{var o;const r=this.editor.getAttributes("link");return!(!(null===(o=n.target)||void 0===o?void 0:o.closest("a"))||!r.href||(window.open(r.href,r.target),0))}}})),this.options.linkOnPaste&&t.push(new r.Sy({key:new r.H$("handlePasteLink"),props:{handlePaste:(t,e,n)=>{const{state:o}=t,{selection:r}=o,{empty:i}=r;if(i)return!1;let a="";n.content.forEach((t=>{a+=t.textContent}));const c=(0,s.find)(a).find((t=>t.isLink&&t.value===a));return!(!a||!c||(this.editor.commands.setMark(this.type,{href:c.href}),0))}}})),t}})},3427:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(5416);const r=o.NB.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,o.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}})},5058:(t,e,n)=>{"use strict";n.d(e,{Z:()=>D});var o=n(5416);const r=/^\s*>\s$/,s=o.NB.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBlockquote:()=>({commands:t})=>t.wrapIn("blockquote"),toggleBlockquote:()=>({commands:t})=>t.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:t})=>t.lift("blockquote")}),addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,o.S0)({find:r,type:this.type})]}}),i=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,d=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,l=o.vc.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],renderHTML({HTMLAttributes:t}){return["strong",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setBold:()=>({commands:t})=>t.setMark("bold"),toggleBold:()=>({commands:t})=>t.toggleMark("bold"),unsetBold:()=>({commands:t})=>t.unsetMark("bold")}),addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,o.Cf)({find:i,type:this.type}),(0,o.Cf)({find:c,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:a,type:this.type}),(0,o.K9)({find:d,type:this.type})]}});var u=n(7082);const p=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,h=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,m=o.vc.create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:t}){return["code",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setCode:()=>({commands:t})=>t.setMark("code"),toggleCode:()=>({commands:t})=>t.toggleMark("code"),unsetCode:()=>({commands:t})=>t.unsetMark("code")}),addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,o.Cf)({find:p,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:h,type:this.type})]}});var f=n(6922);const g=/^```(?<language>[a-z]*)?[\s\n]$/,b=/^~~~(?<language>[a-z]*)?[\s\n]$/,y=o.NB.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;return[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]].filter((t=>t.startsWith(n))).map((t=>t.replace(n,"")))[0]||null},renderHTML:t=>t.language?{class:this.options.languageClassPrefix+t.language}:null}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({HTMLAttributes:t}){return["pre",this.options.HTMLAttributes,["code",t,0]]},addCommands:()=>({setCodeBlock:t=>({commands:e})=>e.setNode("codeBlock",t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode("codeBlock","paragraph",t)}),addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes()}}},addInputRules(){return[(0,o.zK)({find:g,type:this.type,getAttributes:({groups:t})=>t}),(0,o.zK)({find:b,type:this.type,getAttributes:({groups:t})=>t})]},addProseMirrorPlugins(){return[new f.Sy({key:new f.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),o=e.clipboardData.getData("vscode-editor-data"),r=o?JSON.parse(o):void 0,s=null==r?void 0:r.mode;if(!n||!s)return!1;const{tr:i}=t.state;return i.replaceSelectionWith(this.type.create({language:s})),i.setSelection(f.Bs.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,"\n")),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),v=o.NB.create({name:"doc",topNode:!0,content:"block+"});var M=n(7920);const k=o.hj.create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins(){return[(0,M.q)(this.options)]}});var _=n(9151);const w=o.hj.create({name:"gapCursor",addProseMirrorPlugins:()=>[(0,_.d)()],extendNodeSchema(t){var e;const n={name:t.name,options:t.options};return{allowGapCursor:null!==(e=(0,o.nU)((0,o.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),x=o.NB.create({name:"hardBreak",defaultOptions:{keepMarks:!0,HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",(0,o.P1)(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:o})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{keepMarks:t}=this.options,{splittableMarks:r}=o.extensionManager,s=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();return e().insertContent({type:this.name}).command((({tr:e,dispatch:n})=>{if(n&&s&&t){const t=s.filter((t=>r.includes(t.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),O=o.NB.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,(0,o.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode("heading",t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode("heading","paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,o.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var S=n(7446);const T=o.hj.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:()=>({undo:()=>({state:t,dispatch:e})=>(0,S.Yw)(t,e),redo:()=>({state:t,dispatch:e})=>(0,S.KX)(t,e)}),addProseMirrorPlugins(){return[(0,S.m8)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),H=o.NB.create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",(0,o.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().command((({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:o,$anchor:r}=n,s=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;if(!o||!s||!e)return!0;const i=r.before(),a=r.start();return t.deleteRange(i,a),t.setSelection(f.Bs.create(t.doc,i)),!0})).insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{var n;if(e){const{parent:e,pos:o}=t.selection.$from,r=o+1;if(!t.doc.nodeAt(r)){const o=null===(n=e.type.contentMatch.defaultType)||void 0===n?void 0:n.create();o&&(t.insert(r,o),t.setSelection(f.Bs.create(t.doc,r)))}t.scrollIntoView()}return!0})).run()}},addInputRules(){return[(0,o.x2)({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),L=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,C=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,A=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,P=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,j=o.vc.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:t}){return["em",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setItalic:()=>({commands:t})=>t.setMark("italic"),toggleItalic:()=>({commands:t})=>t.toggleMark("italic"),unsetItalic:()=>({commands:t})=>t.unsetMark("italic")}),addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,o.Cf)({find:L,type:this.type}),(0,o.Cf)({find:A,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:C,type:this.type}),(0,o.K9)({find:P,type:this.type})]}});var E=n(3427);const B=/^(\d+)\.\s$/,z=o.NB.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes:()=>({start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,o.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({toggleOrderedList:()=>({commands:t})=>t.toggleList("orderedList","listItem")}),addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[(0,o.S0)({find:B,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]})]}}),$=o.NB.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setParagraph:()=>({commands:t})=>t.setNode("paragraph")}),addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),N=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,I=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,R=o.vc.create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands:()=>({setStrike:()=>({commands:t})=>t.setMark("strike"),toggleStrike:()=>({commands:t})=>t.toggleMark("strike"),unsetStrike:()=>({commands:t})=>t.unsetMark("strike")}),addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,o.Cf)({find:N,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:I,type:this.type})]}}),K=o.NB.create({name:"text",group:"inline"}),D=o.hj.create({name:"starterKit",addExtensions(){var t,e,n,o,r,i,a,c,d,p,h,f,g,b,M,_,S,L;const C=[];return!1!==this.options.blockquote&&C.push(s.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&C.push(l.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&C.push(u.ZP.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&C.push(m.configure(null===(o=this.options)||void 0===o?void 0:o.code)),!1!==this.options.codeBlock&&C.push(y.configure(null===(r=this.options)||void 0===r?void 0:r.codeBlock)),!1!==this.options.document&&C.push(v.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&C.push(k.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&C.push(w.configure(null===(c=this.options)||void 0===c?void 0:c.gapcursor)),!1!==this.options.hardBreak&&C.push(x.configure(null===(d=this.options)||void 0===d?void 0:d.hardBreak)),!1!==this.options.heading&&C.push(O.configure(null===(p=this.options)||void 0===p?void 0:p.heading)),!1!==this.options.history&&C.push(T.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&C.push(H.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&C.push(j.configure(null===(g=this.options)||void 0===g?void 0:g.italic)),!1!==this.options.listItem&&C.push(E.Z.configure(null===(b=this.options)||void 0===b?void 0:b.listItem)),!1!==this.options.orderedList&&C.push(z.configure(null===(M=this.options)||void 0===M?void 0:M.orderedList)),!1!==this.options.paragraph&&C.push($.configure(null===(_=this.options)||void 0===_?void 0:_.paragraph)),!1!==this.options.strike&&C.push(R.configure(null===(S=this.options)||void 0===S?void 0:S.strike)),!1!==this.options.text&&C.push(K.configure(null===(L=this.options)||void 0===L?void 0:L.text)),C}})},7049:(t,e,n)=>{"use strict";n.d(e,{ML:()=>c,kg:()=>d});var o=n(5416),r=n(6922),s=n(5088);class i{constructor({editor:t,element:e,view:n,tippyOptions:r={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({state:t,from:e,to:n})=>{const{doc:r,selection:s}=t,{empty:i}=s,a=!r.textBetween(e,n).length&&(0,o.hT)(t.selection);return!i&&!a},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null==t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.editor=t,this.element=e,this.view=n,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=(0,s.ZP)(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}))}update(t,e){var n,r;const{state:s,composing:i}=t,{doc:a,selection:c}=s,d=e&&e.doc.eq(a)&&e.selection.eq(c);if(i||d)return;this.createTooltip();const{ranges:l}=c,u=Math.min(...l.map((t=>t.$from.pos))),p=Math.max(...l.map((t=>t.$to.pos)));(null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e,from:u,to:p}))?(null===(r=this.tippy)||void 0===r||r.setProps({getReferenceClientRect:()=>{if((0,o.EG)(s.selection)){const e=t.nodeDOM(u);if(e)return e.getBoundingClientRect()}return(0,o.pr)(t,u,p)}}),this.show()):this.hide()}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t;null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}o.hj.create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null},addProseMirrorPlugins(){return this.options.element?[(t={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new r.Sy({key:"string"==typeof t.pluginKey?new r.H$(t.pluginKey):t.pluginKey,view:e=>new i({view:e,...t})}))]:[];var t}});class a{constructor({editor:t,element:e,view:n,tippyOptions:o={},shouldShow:r}){this.preventHide=!1,this.shouldShow=({state:t})=>{const{selection:e}=t,{$anchor:n,empty:o}=e,r=1===n.depth,s=n.parent.isTextblock&&!n.parent.type.spec.code&&!n.parent.textContent;return!!(o&&r&&s)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null==t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.editor=t,this.element=e,this.view=n,r&&(this.shouldShow=r),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=(0,s.ZP)(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}))}update(t,e){var n,r;const{state:s,composing:i}=t,{doc:a,selection:c}=s,{from:d,to:l}=c,u=e&&e.doc.eq(a)&&e.selection.eq(c);i||u||(this.createTooltip(),(null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e}))?(null===(r=this.tippy)||void 0===r||r.setProps({getReferenceClientRect:()=>(0,o.pr)(t,d,l)}),this.show()):this.hide())}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t;null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}o.hj.create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null},addProseMirrorPlugins(){return this.options.element?[(t={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow},new r.Sy({key:"string"==typeof t.pluginKey?new r.H$(t.pluginKey):t.pluginKey,view:e=>new a({view:e,...t})}))]:[];var t}});class c extends o.ML{constructor(){super(...arguments),this.contentComponent=null}}const d={name:"EditorContent",props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.options.element&&this.$nextTick((()=>{const e=this.$el;e&&t.options.element.firstChild&&(e.append(...t.options.element.childNodes),t.contentComponent=this,t.setOptions({element:e}),t.createNodeViews())}))}}},render:t=>t("div"),beforeDestroy(){const{editor:t}=this;if(!t)return;if(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild)return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}};Boolean}}]);