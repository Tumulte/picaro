(self.webpackChunkjavascript_development_environment=self.webpackChunkjavascript_development_environment||[]).push([[259],{7920:(t,e,i)=>{"use strict";i.d(e,{q:()=>r});var o=i(6922),s=i(1081);function r(t){return void 0===t&&(t={}),new o.Sy({view:function(e){return new n(e,t)}})}var n=function(t,e){var i=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var o=function(t){return i[e](t)};return t.dom.addEventListener(e,o),{name:e,handler:o}}))};n.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var i=e.name,o=e.handler;return t.editorView.dom.removeEventListener(i,o)}))},n.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},n.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},n.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var i=e.nodeBefore,o=e.nodeAfter;if(i||o){var s=this.editorView.nodeDOM(this.cursorPos-(i?i.nodeSize:0)).getBoundingClientRect(),r=i?s.bottom:s.top;i&&o&&(r=(r+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:s.left,right:s.right,top:r-this.width/2,bottom:r+this.width/2}}}if(!t){var n=this.editorView.coordsAtPos(this.cursorPos);t={left:n.left-this.width/2,right:n.left+this.width/2,top:n.top,bottom:n.bottom}}var l,h,d=this.editorView.dom.offsetParent;if(this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!d||d==document.body&&"static"==getComputedStyle(d).position)l=-pageXOffset,h=-pageYOffset;else{var a=d.getBoundingClientRect();l=a.left-d.scrollLeft,h=a.top-d.scrollTop}this.element.style.left=t.left-l+"px",this.element.style.top=t.top-h+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},n.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},n.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var i=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=(0,s.nj)(this.editorView.state.doc,i,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(i),this.scheduleRemoval(5e3)}}},n.prototype.dragend=function(){this.scheduleRemoval(20)},n.prototype.drop=function(){this.scheduleRemoval(20)},n.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}}]);