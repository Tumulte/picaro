(self.webpackChunkjavascript_development_environment=self.webpackChunkjavascript_development_environment||[]).push([[540],{9151:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var n=r(6296),o=r(6922),i=r(8780),a=r(3263),c=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,n){var o=r.resolve(n.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return a.p2.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,r){if("number"!=typeof r.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(r.pos))},t.prototype.getBookmark=function(){return new l(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var r=e.index(t);if(0!=r)for(var n=e.node(t).child(r-1);;n=n.lastChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var r=e.indexAfter(t),n=e.node(t);if(r!=n.childCount)for(var o=n.child(r);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e))return!1;var r=t.type.spec.allowGapCursor;if(null!=r)return r;var n=t.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock},t.findFrom=function(e,r,n){e:for(;;){if(!n&&t.valid(e))return e;for(var i=e.pos,a=null,c=e.depth;;c--){var l=e.node(c);if(r>0?e.indexAfter(c)<l.childCount:e.index(c)>0){a=l.child(r>0?e.indexAfter(c):e.index(c)-1);break}if(0==c)return null;i+=r;var s=e.doc.resolve(i);if(t.valid(s))return s}for(;;){var u=r>0?a.firstChild:a.lastChild;if(!u){if(a.isAtom&&!a.isText&&!o.qv.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*r),n=!1;continue e}break}a=u,i+=r;var p=e.doc.resolve(i);if(t.valid(p))return p}return null}},t}(o.Y1);c.prototype.visible=!1,o.Y1.jsonID("gapcursor",c);var l=function(e){this.pos=e};l.prototype.map=function(e){return new l(e.map(this.pos))},l.prototype.resolve=function(e){var t=e.resolve(this.pos);return c.valid(t)?new c(t):o.Y1.near(t)};var s=function(){return new o.Sy({props:{decorations:d,createSelectionBetween:function(e,t,r){if(t.pos==r.pos&&c.valid(r))return new c(r)},handleClick:f,handleKeyDown:u}})},u=(0,n.$)({ArrowLeft:p("horiz",-1),ArrowRight:p("horiz",1),ArrowUp:p("vert",-1),ArrowDown:p("vert",1)});function p(e,t){var r="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,n,i){var a=e.selection,l=t>0?a.$to:a.$from,s=a.empty;if(a instanceof o.Bs){if(!i.endOfTextblock(r)||0==l.depth)return!1;s=!1,l=e.doc.resolve(t>0?l.after():l.before())}var u=c.findFrom(l,t,s);return!!u&&(n&&n(e.tr.setSelection(new c(u))),!0)}}function f(e,t,r){if(!e.editable)return!1;var n=e.state.doc.resolve(t);if(!c.valid(n))return!1;var i=e.posAtCoords({left:r.clientX,top:r.clientY}).inside;return!(i>-1&&o.qv.isSelectable(e.state.doc.nodeAt(i))||(e.dispatch(e.state.tr.setSelection(new c(n))),0))}function d(e){if(!(e.selection instanceof c))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",i.EH.create(e.doc,[i.p.widget(e.selection.head,t,{key:"gapcursor"})])}}}]);